<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="generator" content="gvim" />
<meta name="author" content="闲耘™ (hotoo.cn[AT]gmail.com)" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<style type="text/css" media="screen">
html,body{width:100%; height:100%;}
#ct{position:fixed; bottom:0; right:1em;}
#searchBox, #commandBox{position:fixed; bottom:0; left:5px; display:none;}
</style>
<title>Vimlike</title>
</head>
<body>
    <div id="ct"></div>
    <div id="searchBox">
        /<input type="search" id="key" />
    </div>
    <div id="commandBox">
        :<input type="text" id="command" />
    </div>
    <div style="width:160%; height:300%;">
        <p>try:<p>
        <pre>
        [count]h
        [count]j
        [count]k
        [count]l
        :alert(0)
        :any command.
        /keyword for search.
        </pre>
        <p>learnning more about <a href="http://www.vim.org/">Vim</a>.</p>
        <p>project home: <a href="https://github.com/hotoo/Vimlike.js">Vimlike.js</a>,
        more fun see: <a href="https://github.com/hotoo/Vimlide">Vimlide</a></p>
    </div>
    <script type="text/javascript" src="Vimlike.js"></script>
    <script type="text/javascript">/*<![CDATA[*/
        window.onload = function(){
            function $(id){return document.getElementById(id);}
            var searchBox = $("searchBox");
            var searchIpt = $("key");

            var normal = new Vimlike(document);
            normal.counter = function(c){document.getElementById("ct").innerHTML = c;}
            normal.map("j", function(c){window.scrollBy(0, 40*(c||1))});
            normal.map("k", function(c){window.scrollBy(0, -40*(c||1))});
            normal.map("h", function(c){window.scrollBy(-40*(c||1), 0)});
            normal.map("l", function(c){window.scrollBy(40*(c||1), 0)});
            normal.map("gg", function(c){window.scrollTo(0, c||0)});
            normal.map("G", function(c){window.scrollTo(0, c||9999999)});
            normal.map("/", function(c){searchBox.style.display = "block"; searchIpt.focus();});
            normal.map(":", function(c){commandBox.style.display = "block"; commandIpt.focus();});

            function clearSearch(){
                searchIpt.value = "";
                searchIpt.blur();
                searchBox.style.display = "none";
            }
            var search = new Vimlike(searchIpt);
            search.map("<CR>", function(){
                // do search.
                clearSearch();
            });
            search.map("<Esc>", clearSearch, true);
            search.map("<BS>", function(){
                if(searchIpt.value=="")
                    clearSearch();
            });


            function clearCommand(){
                commandIpt.value = "";
                commandIpt.blur();
                commandBox.style.display = "none";
            }
            var commandIpt = $("command");
            var commandBox = $("commandBox");
            var command = new Vimlike(commandIpt);
            command.map("<CR>", function(){
                try{window.eval(commandIpt.value)}catch(ex){alert("Command not supports.")}
                clearCommand();
            });
            command.map("<Esc>", clearCommand, true);
            command.map("<BS>", function(){
                if(commandIpt.value=="")
                    clearCommand();
            });
        };
    /*]]>*/</script>
</body>
</html>
